---
import SiteNav from "@components/SiteNav.astro";
import PageLayout from "@layouts/PageLayout.astro";
import type { Page } from "../../site";
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.sort((a, b) => a.data.pubDate.getTime() - b.data.pubDate.getTime()).map(post => ({
    params: { id: post.id },
    props: { post },
  }));
}
import { months } from "../../site"
const { post } = Astro.props;
const { Content } = await render(post);

const page: Page = {
	navTitle:  "Blog: " + post.data.title,
	heroTitle:  post.data.title,
	heroSubtitle:  post.data.subtitle,
};
---

<PageLayout page={page}>
	<!-- Hero -->
	<style>
		/* Small screens (320px - 480px) */
		@media only screen and (max-width: 480px) {
			.hero {
				background-image: url("../../assets/hero24-sm.webp");
			}
		}
		/* Medium screens (481px - 768px) */
		@media only screen and (min-width: 481px) and (max-width: 768px) {
			.hero {
				background-image: url("../../assets/hero24-md.webp");
			}
		}
		/* Large screens (769px - 1024px) */
		@media only screen and (min-width: 769px) and (max-width: 1024px) {
			.hero {
				background-image: url("../../assets/hero24-lg.webp");
			}
		}
		/* Extra large screens (1025px and above) */
		@media only screen and (min-width: 1025px) {
			.hero {
				background-image: url("../../assets/hero24-xl.webp");
			}
		}
	</style>
	<div class="hero" data-theme="dark">
		<SiteNav/>
		<header class="container">
			<h1>{page.heroTitle}</h1>
			<p>{page.heroSubtitle}</p>
		</header>
	</div>
	<!-- ./ Hero -->

	<main class="container">
		<p><i><small>{months[post.data.pubDate.getMonth()]}
			{post.data.pubDate.getDate()}, {post.data.pubDate.getFullYear()}</small></i></p>
		<Content />
	</main>
</PageLayout>